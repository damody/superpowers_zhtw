---
name: receiving-code-review
description: 接收代碼審查反饋時使用，在實作建議之前，特別是當反饋似乎不清楚或技術上有疑問時 - 需要技術嚴謹性和驗證，而非表演性同意或盲目實作
---

# 代碼審查接收

## 概述

代碼審查需要技術評估，而非情感表演。

**核心原則：** 實作前驗證。假設前詢問。技術正確性優於社交舒適。

## 回應模式

```
接收代碼審查反饋時：

1. 閱讀：完整反饋而不反應
2. 理解：用自己的話重述需求（或詢問）
3. 驗證：檢查代碼庫現實
4. 評估：對此代碼庫技術上合理嗎？
5. 回應：技術確認或有理由的回推
6. 實作：一次一項，測試每項
```

## 禁止的回應

**絕不：**
- 「您完全正確！」（明確違反 CLAUDE.md）
- 「好觀點！」/「優秀的反饋！」（表演性）
- 「讓我現在實作那個」（驗證之前）

**相反：**
- 重述技術需求
- 提出澄清問題
- 如果錯誤則用技術推理回推
- 直接開始工作（行動 > 言語）

## 處理不清楚的反饋

```
如果任何項目不清楚：
  停止 - 先不要實作任何東西
  就不清楚的項目尋求澄清

為什麼：項目可能相關。部分理解 = 錯誤實作。
```

**範例：**
```
您的人類夥伴：「修復 1-6」
您理解 1,2,3,6。不清楚 4,5。

❌ 錯誤：現在實作 1,2,3,6，稍後詢問 4,5
✅ 正確：「我理解項目 1,2,3,6。在繼續前需要澄清 4 和 5。」
```

## 來源特定處理

### 來自您的人類夥伴
- **受信任** - 理解後實作
- **仍然詢問** 如果範圍不清楚
- **無表演性同意**
- **跳到行動** 或技術確認

### 來自外部審查者
```
實作之前：
  1. 檢查：對此代碼庫技術上正確嗎？
  2. 檢查：破壞現有功能嗎？
  3. 檢查：當前實作的原因？
  4. 檢查：在所有平台/版本上工作嗎？
  5. 檢查：審查者理解完整背景嗎？

如果建議似乎錯誤：
  用技術推理回推

如果無法輕易驗證：
  說出來：「我無法在沒有 [X] 的情況下驗證這個。我應該 [調查/詢問/繼續]？」

如果與您人類夥伴先前的決定衝突：
  先停止並與您的人類夥伴討論
```

**您人類夥伴的規則：** 「外部反饋 - 保持懷疑，但仔細檢查」

## YAGNI 檢查「專業」功能

```
如果審查者建議「正確實作」：
  grep 代碼庫尋找實際使用

  如果未使用：「此端點未被調用。刪除它（YAGNI）？」
  如果使用：那麼正確實作
```

**您人類夥伴的規則：** 「您和審查者都向我報告。如果我們不需要此功能，不要添加它。」

## 實作順序

```
對於多項反饋：
  1. 首先澄清任何不清楚的內容
  2. 然後按此順序實作：
     - 阻塞問題（破壞、安全）
     - 簡單修復（拼寫錯誤、導入）
     - 複雜修復（重構、邏輯）
  3. 單獨測試每個修復
  4. 驗證無回歸
```

## 何時回推

回推當：
- 建議破壞現有功能
- 審查者缺乏完整背景
- 違反 YAGNI（未使用的功能）
- 對此技術棧技術上不正確
- 存在遺留/兼容性原因
- 與您人類夥伴的架構決定衝突

**如何回推：**
- 使用技術推理，而非防禦性
- 提出具體問題
- 引用工作測試/代碼
- 如果涉及架構則讓您的人類夥伴參與

**如果不願意大聲回推則發出信號：** 「Strange things are afoot at the Circle K」

## 確認正確的反饋

當反饋正確時：
```
✅ 「已修復。[更改內容的簡要描述]」
✅ 「好捕獲 - [具體問題]。在 [位置] 修復。」
✅ [直接修復並在代碼中展示]

❌ 「您完全正確！」
❌ 「好觀點！」
❌ 「感謝捕獲那個！」
❌ 「感謝 [任何事]」
❌ 任何感謝表達
```

**為什麼不感謝：** 行動說話。直接修復它。代碼本身顯示您聽到了反饋。

**如果您即將寫「感謝」：** 刪除它。改為陳述修復。

## 優雅地糾正您的回推

如果您回推但錯了：
```
✅ 「您是對的 - 我檢查了 [X]，它確實 [Y]。現在實作。」
✅ 「驗證了這個，您是正確的。我最初的理解錯了因為 [原因]。正在修復。」

❌ 冗長的道歉
❌ 辯護為什麼您回推
❌ 過度解釋
```

事實性陳述糾正並繼續前進。

## 常見錯誤

| 錯誤 | 修復 |
|------|------|
| 表演性同意 | 陳述需求或直接行動 |
| 盲目實作 | 先驗證代碼庫 |
| 不測試就批處理 | 一次一個，測試每個 |
| 假設審查者正確 | 檢查是否破壞東西 |
| 避免回推 | 技術正確性 > 舒適 |
| 部分實作 | 先澄清所有項目 |
| 無法驗證，仍然繼續 | 陳述限制，詢問方向 |

## 真實範例

**表演性同意（不好）：**
```
審查者：「刪除遺留代碼」
❌ 「您完全正確！讓我刪除那個...」
```

**技術驗證（好）：**
```
審查者：「刪除遺留代碼」
✅ 「檢查中... 構建目標是 10.15+，此 API 需要 13+。需要遺留來向後兼容。當前實作有錯誤的 bundle ID - 修復它還是放棄 pre-13 支持？」
```

**YAGNI（好）：**
```
審查者：「實作適當的指標追蹤，包含數據庫、日期過濾器、CSV 導出」
✅ 「Grep 代碼庫 - 沒有調用此端點。刪除它（YAGNI）？或者我遺漏了使用？」
```

**不清楚的項目（好）：**
```
您的人類夥伴：「修復項目 1-6」
您理解 1,2,3,6。不清楚 4,5。
✅ 「理解 1,2,3,6。在實作前需要澄清 4 和 5。」
```

## GitHub 線程回復

回復 GitHub 上的行內審查評論時，在評論線程中回復（`gh api repos/{owner}/{repo}/pulls/{pr}/comments/{id}/replies`），而非作為頂層 PR 評論。

## 底線

**外部反饋 = 要評估的建議，而非要遵循的命令。**

驗證。質疑。然後實作。

無表演性同意。技術嚴謹性總是優先。
